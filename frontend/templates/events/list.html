<header>
    <span class="title">{{slug}}@decklist.fun</span>
</header>

<form class="searchbar" action="/e/{{slug}}" method="get"
    hx-trigger="keyup change from:input delay:500ms, submit, search" hx-select="#inbox" hx-target="#inbox"
    hx-swap="outerHTML">
    <input type="submit" value="ðŸ”Ž" alt="Search">
    <input type="search" name="q" value="{{q}}" placeholder="Search">
</form>

<div id="inbox">
    {{#mails}}
    <div class="inbox-item" hx-on:click="select(this)">
        <div class="selector"></div>
        <div class="details">
            {{#name}}
            <p class="name">{{.}}</p>
            <p class="from">{{from}}</p>
            {{/name}}
            {{^name}}
            <p class="name">{{from}}</p>
            {{/name}}
            <p class="note">{{note}}</p>
        </div>
        <div class="info">
            <input disabled type="checkbox" name='reviewed' {{#reviewed}}checked{{/reviewed}} />
            <a href="/e/{{slug}}/mail/{{id}}">></a>
        </div>
    </div>
    {{/mails}}
    {{^mails}}
    No mails {{#q}}matchig <code>{{.}}</code>.{{/q}}{{^q}}. Share <code>{{slug}}@decklist.fun</code> with your
    players{{/q}}
    {{/mails}}
</div>

<script>

    function select(elem) {
        htmx.findAll(".inbox-item.selected").forEach(element => {
            element.classList.remove("selected")
        });
        elem.classList.add("selected");
    }
</script>